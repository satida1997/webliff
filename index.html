<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üçú ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ú‡πà‡∏≤‡∏ô LINE</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body { font-family: 'Kanit', sans-serif; padding: 20px; text-align: center; }
    select, input, button { margin: 10px; padding: 10px; width: 80%; font-size: 16px; }
    h1 { margin-bottom: 20px; }
  </style>
</head>
<body>

  <h1>üç± ‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h1>

  <select id="menu">
    <option value="‡∏Å‡∏£‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏≠‡∏ö">‡∏Å‡∏£‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡∏´‡∏°‡∏π‡∏Å‡∏£‡∏≠‡∏ö</option>
    <option value="‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢">‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢</option>
    <option value="‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏°‡∏π‡∏ó‡∏≠‡∏î">‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏°‡∏π‡∏ó‡∏≠‡∏î</option>
    <option value="‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏Å‡∏∏‡πâ‡∏á">‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏Å‡∏∏‡πâ‡∏á</option>
    <option value="‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏ó‡∏∞‡πÄ‡∏•">‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏ó‡∏∞‡πÄ‡∏•</option>
  </select>

  <input type="number" id="quantity" value="1" min="1" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" />

  <button onclick="sendOrder()">‚úÖ ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</button>

  <script>
    async function main() {
      await liff.init({ liffId: "2007702153-yM6ApL9M" }); // ‡πÉ‡∏™‡πà LIFF ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
      if (!liff.isLoggedIn()) {
        liff.login();
      }
    }

    async function sendOrder() {
      const menu = document.getElementById('menu').value;
      const qty = document.getElementById('quantity').value;
      if (!menu || qty < 1) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        return;
      }
      try {
        const profile = await liff.getProfile();
        const name = profile.displayName;

        const data = { name, menu, quantity: qty };

        const response = await fetch('https://script.google.com/macros/s/AKfycbwnTLj1yDgsvGO8HG8EnL-nMcWfZPh-h4MKIlAzTlf_5DLklJk-7To_EDpKu_JAii7Z/exec', {  // <-- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô URL ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        const result = await response.json();
        if (result.status === 'success') {
          alert('‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ');
          liff.closeWindow();
        } else {
          alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + result.message);
        }
      } catch (err) {
        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠');
        console.error(err);
      }
    }

    main();
  </script>

</body>
</html>
